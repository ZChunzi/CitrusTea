(()=>{"use strict";var e={d:(t,s)=>{for(var n in s)e.o(s,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:s[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};e.d({},{L:()=>p});var t=(new class{constructor(){this.xhr=new XMLHttpRequest,this.xhr.overrideMimeType("application/json;charset=utf-8"),this.xhr.withCredentials=!1,this.baseurl="",this.headers={}}create(e){return this.baseurl=e,this}setHeader(e,t){this.headers[e]=t}setHeaders(e){this.headers=Object.assign(this.headers,e)}get(e,t={}){let s=`${this.baseurl}${e}`;if(Object.keys(t).length>0){s+="?";for(const e in t)s+=`${e}=${t[e]}&`;s=s.slice(0,-1)}return this.xhr.open("GET",s),this.setHeaders(this.headers),this.sendRequest()}post(e,t={}){const s=`${this.baseurl}${e}`;this.xhr.open("POST",s),this.setHeaders(this.headers),this.xhr.setRequestHeader("Content-Type","application/json;charset=utf-8");const n=JSON.stringify(t);return this.sendRequest(n)}put(e,t={}){const s=`${this.baseurl}${e}`;this.xhr.open("PUT",s),this.setHeaders(this.headers),this.xhr.setRequestHeader("Content-Type","application/json;charset=utf-8");const n=JSON.stringify(t);return this.sendRequest(n)}delete(e){const t=`${this.baseurl}${e}`;return this.xhr.open("DELETE",t),this.setHeaders(this.headers),this.sendRequest()}sendRequest(e){return new Promise(((t,s)=>{this.xhr.onload=()=>{if(4===this.xhr.readyState)if(200===this.xhr.status){let e;try{e=JSON.parse(this.xhr.responseText)}catch{e=this.xhr.responseText}const s={code:this.xhr.status,data:e};t(s)}else s(new Error(this.xhr.statusText))},this.xhr.onerror=()=>{s(new Error("Network Error"))};for(const e in this.headers)this.xhr.setRequestHeader(e,this.headers[e]);e?this.xhr.send(e):this.xhr.send()}))}}).create("/api/");const s=async({requestFunction:e,value:t,duration:s,className:a})=>{let r=document.createElement("button"),i=document.getElementById("app");r.innerText=t,r.className=a;r.addEventListener("click",(async()=>{const t=await e(r);n(t,s)})),i.appendChild(r)},n=async(e,t)=>{let s=document.createElement("div");s.innerText=e,s.className="floating-div",Object.assign(s.style,{position:"fixed",top:"10%",left:"47%",zIndex:9999999,background:"#229954 ",borderRadius:"3px",color:"rgb(255, 255, 255)",fontSize:"0.8em",padding:"0.8em"}),app.appendChild(s),s.style.transition=`transform ${t/1e3}s linear`,s.style.transform="translateY(0)",setTimeout((()=>{s.remove()}),t)},a=(e,t)=>{const s=Object.keys(e);for(let n=0;n<s.length;n++){const r=s[n],i=e[r];if(t.startsWith(r)){if(t===r||!i.hasOwnProperty("routes"))return{path:r,handler:i.handler};if("object"==typeof i&&i.hasOwnProperty("routes")){const e=t.slice(r.length),s=a(i.routes,e);if(s)return{path:r+s.path,handler:s.handler}}}}return null},r=()=>{let e=document.getElementById("app");for(;e.firstChild;)e.firstChild.remove()},i=()=>{document.getElementById("app").innerHTML="404: Page Not Found"},o=()=>window.location.pathname,h={"/":{handler:p,routes:{new:{handler:async()=>{alert("New Route")}}}},"/home":{handler:p,routes:{"/me":{handler:async()=>{alert("New Route2222")},routes:{"/infomation":{handler:async()=>{alert("New Route333")}}}}}},"/about":{handler:async()=>{s({requestFunction:async()=>{d("/home")},value:"跳转测试",className:"test"})}},"/about/new":{handler:async()=>{alert("About New Route")}},"/poem":{handler:async()=>{let e=document.getElementById("app"),t=document.createElement("pre");t.className="divtest",t.innerText="蒹葭苍苍，白露为霜。\n所谓伊人，在水一方。\n溯洄从之，道阻且长。\n溯游从之，宛在水中央。\n蒹葭萋萋，白露未晞。\n所谓伊人，在水之湄。\n溯洄从之，道阻且跻。\n溯游从之，宛在水中坻。\n蒹葭采采，白露未已。\n所谓伊人，在水之涘。\n溯洄从之，道阻且右。\n溯游从之，宛在水中沚。",e.appendChild(t)}}},d=e=>{window.history.pushState(null,null,e),(async(e,t)=>{const s=t||o(),n=a(e,s);n?(r(),await n.handler()):i()})(h)},c=document.getElementById("app"),l=async e=>{const{type:t,id:s}=e,n=document.createElement("input");return n.type=t,n.id=s,n},u=async e=>{const{buttonValue:t,buttonClick:s}=e,n=await(async()=>document.createElement("div"))(),a=await(async()=>document.createElement("br"))(),r=await l({type:"text",id:"username"}),i=await l({type:"password"}),o=await(async e=>{const{value:t,buttonClick:s}=e,n=document.createElement("button");return n.innerText=t,n.onclick=s,n})({value:t,buttonClick:s});n.appendChild(r),n.appendChild(a),n.appendChild(i),n.appendChild(a),n.appendChild(o),c.appendChild(n)},p=async()=>{s({requestFunction:async()=>((async e=>{t.setHeader("Authorization",e)})("token"),(await(async(e,s)=>{let{data:n}=await t.post(e,s);return n})("do",{})).code),value:"Post测试",duration:2e3,className:"test"}),s({requestFunction:async()=>(await(async(e,s)=>{let{data:n}=await t.get(e,s);return n})("add",{})).cishu,value:"Get测试",duration:2e3,className:"test"}),u({buttonValue:"222",buttonClick:()=>{alert("123")}})};document.addEventListener("click",(e=>{if("A"===e.target.tagName){e.preventDefault();const t=e.target.getAttribute("href");d(t)}}))})();